language: go
services:
- docker
go:
- 1.8
cache:
  directories:
  - vendor
before_install:
- curl https://glide.sh/get | sh
install:
- glide install
script:
- go get -u github.com/alecthomas/gometalinter
- gometalinter --install --force
- gometalinter --vendor --fast --disable=gotype --disable=vetshadow ./...
- go test -race $(glide novendor)
- "./_infrastructure/scripts/travis_publish_image.sh"
- "./_infrastructure/scripts/travis_deploy.sh"
env:
  global:
  - AWS_DEFAULT_REGION=us-east-1
  - NAME=gateway
  - REMOTE_IMAGE_URL=377024778620.dkr.ecr.us-east-1.amazonaws.com/gateway
  - secure: o0qPM+WkdflXKyoJlp96Y3s9RmjoiORckBKW+ZEm8N88ddSUc6Z9PKkBRWXuTm2vjBerURjAEpY4GMThnxzDKv1cFCLKcNRLfEJJqeKOBgjwvVt7w165T+0TzNZyMvOqz+grECjvqd3kQg08lbJ86JL8LZoeFdfSOEAUEvpJvY3SOgpPQ1ccvgTjyXetxEDfIU3ePpEAls/PxHzC4GC1n82nTZF3EfMG2GDP3UBMzM+GQR0RoUhWyVgbxTN3QsVshliglK6+vND03R3vUlB0HRHeCoAISmKquxXkCljHMTmm6vKzcygl7Ksz3utZUrideGo8Dwx6Ig+cjhZIWXhKNKyvHbGUWi9IZEZMNW3BRmr0rfSYFuivO4IHzelxJNtTjuDlXMVbyY8OKq8b6Dv0JDNpQP50jEISP6fl4y1tA0RxOeXLjxq2GgLheiXeYcf4DkX4PUWHW7eITyYHL0nSsN2p8Wqdu974F114hKUsroUErH98PS0B6Wa4oum4TZMyDoiB82oNfag6rB1PLepPYP84blpsRABKAKHyvMGjMPFTsDVp6f3J5HYV6k0r5gaq3WFK/Sq1o/v4kQoJUmFnraVlA+QfCXosnuzGHIRZU29ipfW9MqCEezbVpNbATihJewM/x8gLkhSw92IAssbtxaC9oBRBh2i3BdEsfGrUp8Q=
  - secure: CwfCa37nXonPA5uxDO+JDzxFT7qEfssi0o9HdT+y+F17F/fKsmyjyJfVEA4zWkwAp+sg6o1YrEv9ePbs+0TjzU/GmEvtsKROAZdnVEguq6SwMoUQLGOFrj1EzUGqXnq3NmEow6v9qquPCAYhw++9bqXKTcNNROZIts5eRBkz0HelIG15Tw51ZsvW8K8iszMwz5q3sSJe+0sZ4ryeDvBPuUkC7j/iolfBFcsEmFkt3H1chZ805ZbpFwOVrNBf7S3bITxhSvpw6JV7zSodlA1lA7Ip14FuqgsowInc5fqyc+MgHU2zWuI8TBNvsMSNq2icqapbBF4vCwp5ANhBPPNWcWaKOKSDg6vNXo8+lr/bogv8M9uUr8McczpURl+wfZuWRcmumfdfya3ZJ6Zrusz4/FL0JAV3xdgwhQGScVi3nREJruUHlHOgLhUDNkMc731eh49okxl13TKJ0cA2GA6VJtsazZAci7GOO19OVa9y/admzpxyB7PWGLStmfXnT5W4X1H2bSabjp+QLsTWr8pxtdEUd4tQrADSUDsMwJzGUAzgaF+ApcGUyNH5ygAVglf8/CjqwVBDLfGNAEVHcif3N8oFgIjuTEj0Bup9OJK74zmVbcWSgRkYTHJ/D8q2gV/NzK0NLD2r1EWZB5pw7CbOPNQotrzCSuCUW3gxc9RpTWY=
notifications:
  email:
  - platform@serverless.com
